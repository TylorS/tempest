{"version":3,"file":null,"sources":["../lib/index.js"],"sourcesContent":["import { Stream, PropagateTask } from '@tempest/core';\nexport function periodic(period) {\n    return new Stream(new Periodic(period));\n}\nexport class Periodic {\n    constructor(period) {\n        this.period = period;\n    }\n    run(sink, scheduler) {\n        const task = new PropagateTask(makeRun(-1), void 0, sink);\n        const scheduledTask = scheduler.periodic(this.period, task);\n        return {\n            dispose() {\n                scheduler.cancel(scheduledTask);\n            }\n        };\n    }\n}\nfunction makeRun(i) {\n    return function run(time, value, sink) {\n        sink.event(time, ++i);\n    };\n}\n//# sourceMappingURL=index.js.map"],"names":["Stream","PropagateTask"],"mappings":";;;;;;IACO,SAAS,QAAQ,CAAC,MAAM,EAAE;QAC7B,OAAO,IAAIA,oBAAM,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;KAC3C;AACD,AAAO,IAAA,IAAM,QAAQ,GAAC,iBACP,CAAC,MAAM,EAAE;QACpB,IAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;AAC7B,IAAA,CAAK,CAAA;AACL,IAAA,mBAAI,GAAG,iBAAC,IAAI,EAAE,SAAS,EAAE;QACrB,IAAU,IAAI,GAAG,IAAIC,2BAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9D,IAAU,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAChE,OAAW;YACP,OAAW,kBAAA,GAAG;gBACV,SAAa,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;aACnC;SACJ,CAAC;AACV,IAAA,CAAK,CAAA;AAEL,IAAA,SAAS,OAAO,CAAC,CAAC,EAAE;QAChB,OAAO,SAAS,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACnC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;SACzB,CAAC;KACL;;;;;;;"}