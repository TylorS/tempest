{"version":3,"file":null,"sources":["../lib/index.js"],"sourcesContent":["import { Stream } from '@tempest/core';\nexport function fromPromise(promise) {\n    return new Stream(new FromPromise(promise));\n}\nexport class FromPromise {\n    constructor(promise) {\n        this.promise = promise;\n    }\n    run(sink, scheduler) {\n        let running = true;\n        const promise = this.promise;\n        promise.then((value) => {\n            if (!running)\n                return;\n            sink.event(scheduler.now(), value);\n        }).catch((err) => {\n            sink.error(scheduler.now(), err);\n        }).then(() => {\n            sink.end(scheduler.now(), void 0);\n        });\n        return {\n            dispose() {\n                running = false;\n            }\n        };\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["Stream"],"mappings":";;;;;;IACO,SAAS,WAAW,CAAC,OAAO,EAAE;QACjC,OAAO,IAAIA,oBAAM,CAAC,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;KAC/C;AACD,AAAO,IAAA,IAAM,WAAW,GAAC,oBACV,CAAC,OAAO,EAAE;QACrB,IAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;AAC/B,IAAA,CAAK,CAAA;AACL,IAAA,sBAAI,GAAG,iBAAC,IAAI,EAAE,SAAS,EAAE;QACrB,IAAQ,OAAO,GAAG,IAAI,CAAC;QACvB,IAAU,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QACjC,OAAW,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE;YACrB,IAAQ,CAAC,OAAO;gBACZ,OAAW;YACf,IAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC;SACtC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG,EAAE;YACf,IAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC;SACpC,CAAC,CAAC,IAAI,CAAC,YAAG;YACX,IAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC;SACrC,CAAC,CAAC;QACP,OAAW;YACP,OAAW,kBAAA,GAAG;gBACV,OAAW,GAAG,KAAK,CAAC;aACnB;SACJ,CAAC;AACV,IAAA,CAAK,CAAA;;;;;;;"}