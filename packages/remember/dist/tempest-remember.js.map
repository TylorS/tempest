{"version":3,"file":null,"sources":["../lib/index.js"],"sourcesContent":["import { Stream, Multicast } from '@tempest/core';\nexport function remember(stream) {\n    return new MemoryStream(stream.source);\n}\nexport class MemoryStream extends Stream {\n    constructor(source) {\n        super(source);\n        this.source = new Memory(source);\n    }\n}\nexport class Memory extends Multicast {\n    constructor(source) {\n        super(source);\n        this.has = false;\n        this.value = void 0;\n    }\n    _add(sink) {\n        if (this.has) {\n            sink.event(Date.now(), this.value);\n        }\n        return super._add(sink);\n    }\n    event(time, value) {\n        this.has = true;\n        this.value = value;\n        super.event(time, value);\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["super","Stream","Multicast"],"mappings":";;;;;;IACO,SAAS,QAAQ,CAAC,MAAM,EAAE;QAC7B,OAAO,IAAI,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;KAC1C;AACD,AAAO,IAAA,IAAM,YAAY,GAAe;QAAC,qBAC1B,CAAC,MAAM,EAAE;YAChBA,MAAK,KAAA,CAAC,MAAA,MAAM,CAAC,CAAC;YACd,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;SACpC;;;;0DAAA;;;MAJ6BC,oBAKjC,GAAA;AACD,AAAO,IAAA,IAAM,MAAM,GAAkB;QAAC,eACvB,CAAC,MAAM,EAAE;YAChBD,SAAK,KAAA,CAAC,MAAA,MAAM,CAAC,CAAC;YACd,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;YACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;SACvB;;;;8CAAA;QACD,iBAAA,IAAI,kBAAC,IAAI,EAAE;YACP,IAAI,IAAI,CAAC,GAAG,EAAE;gBACV,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;aACtC;YACD,OAAOA,mBAAK,CAAC,IAAI,KAAA,CAAC,MAAA,IAAI,CAAC,CAAC;SAC3B,CAAA;QACD,iBAAA,KAAK,mBAAC,IAAI,EAAE,KAAK,EAAE;YACf,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnBA,mBAAK,CAAC,KAAK,KAAA,CAAC,MAAA,IAAI,EAAE,KAAK,CAAC,CAAC;SAC5B,CAAA;;;MAhBuBE,uBAiB3B,GAAA;;;;;;;;"}