{"version":3,"file":null,"sources":["../lib/index.js"],"sourcesContent":["import { Stream } from '@tempest/core';\nexport const take = function (amount, stream) {\n    switch (arguments.length) {\n        case 1: return function (stream) { return new Stream(new Take(amount, stream.source)); };\n        case 2: return new Stream(new Take(amount, stream.source));\n        default: return take;\n    }\n};\nclass Take {\n    constructor(amount, source) {\n        this.amount = amount;\n        this.source = source;\n    }\n    run(sink, scheduler) {\n        return new TakeSink(this.amount, sink, this.source, scheduler);\n    }\n}\nclass TakeSink {\n    constructor(amount, sink, source, scheduler) {\n        this.amount = amount;\n        this.sink = sink;\n        this.disposable = source.run(this, scheduler);\n    }\n    event(time, value) {\n        if (--this.amount >= 0) {\n            this.sink.event(time, value);\n            if (this.amount === 0) {\n                this.dispose();\n                this.sink.end(time, value);\n            }\n        }\n    }\n    error(time, err) {\n        this.sink.error(time, err);\n    }\n    end(time, value) {\n        this.sink.end(time, value);\n    }\n    dispose() {\n        return this.disposable.dispose();\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["const","Stream"],"mappings":";;;;;;IACOA,IAAM,IAAI,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE;QAC1C,QAAQ,SAAS,CAAC,MAAM;YACpB,KAAK,CAAC,EAAE,OAAO,UAAU,MAAM,EAAE,EAAE,OAAO,IAAIC,oBAAM,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;YACzF,KAAK,CAAC,EAAE,OAAO,IAAIA,oBAAM,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3D,SAAS,OAAO,IAAI,CAAC;SACxB;KACJ,CAAC;AACF,IAAA,IAAM,IAAI,GAAC,aACI,CAAC,MAAM,EAAE,MAAM,EAAE;QAC5B,IAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;QACzB,IAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;AAC7B,IAAA,CAAK,CAAA;AACL,IAAA,eAAI,GAAG,iBAAC,IAAI,EAAE,SAAS,EAAE;QACrB,OAAW,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;AACvE,IAAA,CAAK,CAAA;AAEL,IAAA,IAAM,QAAQ,GAAC,iBACA,CAAC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE;QAC7C,IAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;QACzB,IAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,IAAQ,CAAC,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;AACtD,IAAA,CAAK,CAAA;AACL,IAAA,mBAAI,KAAK,mBAAC,IAAI,EAAE,KAAK,EAAE;QACnB,IAAQ,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YACxB,IAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YACjC,IAAQ,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvB,IAAQ,CAAC,OAAO,EAAE,CAAC;gBACnB,IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aAC9B;SACJ;AACT,IAAA,CAAK,CAAA;AACL,IAAA,mBAAI,KAAK,mBAAC,IAAI,EAAE,GAAG,EAAE;QACjB,IAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACnC,IAAA,CAAK,CAAA;AACL,IAAA,mBAAI,GAAG,iBAAC,IAAI,EAAE,KAAK,EAAE;QACjB,IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnC,IAAA,CAAK,CAAA;AACL,IAAA,mBAAI,OAAO,uBAAG;QACV,OAAW,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;AACzC,IAAA,CAAK,CAAA;;;;;;"}