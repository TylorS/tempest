{"version":3,"file":null,"sources":["../lib/index.js"],"sourcesContent":["import { Stream } from '@tempest/core';\nexport function create(subscriber) {\n    return new Stream(new Create(subscriber));\n}\nexport class Create {\n    constructor(_subscribe) {\n        this._subscribe = _subscribe;\n    }\n    run(sink, scheduler) {\n        const subscribe = this._subscribe;\n        const observer = new SinkObserver(sink, scheduler);\n        const dispose = Promise.resolve(observer).then(subscribe);\n        return {\n            dispose() {\n                dispose.then((f) => {\n                    if (typeof f === 'function')\n                        f();\n                });\n            }\n        };\n    }\n}\nclass SinkObserver {\n    constructor(sink, scheduler) {\n        this.sink = sink;\n        this.scheduler = scheduler;\n    }\n    next(value) {\n        this.sink.event(this.scheduler.now(), value);\n    }\n    error(err) {\n        this.sink.error(this.scheduler.now(), err);\n    }\n    complete(value) {\n        this.sink.end(this.scheduler.now(), value);\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["Stream"],"mappings":";;;;;;IACO,SAAS,MAAM,CAAC,UAAU,EAAE;QAC/B,OAAO,IAAIA,oBAAM,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;KAC7C;AACD,AAAO,IAAA,IAAM,MAAM,GAAC,eACL,CAAC,UAAU,EAAE;QACxB,IAAQ,CAAC,UAAU,GAAG,UAAU,CAAC;AACrC,IAAA,CAAK,CAAA;AACL,IAAA,iBAAI,GAAG,iBAAC,IAAI,EAAE,SAAS,EAAE;QACrB,IAAU,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;QACtC,IAAU,QAAQ,GAAG,IAAI,YAAY,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACvD,IAAU,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC9D,OAAW;YACP,OAAW,oBAAA,GAAG;gBACV,OAAW,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE;oBACjB,IAAQ,OAAO,CAAC,KAAK,UAAU;wBAC3B,CAAK,EAAE,CAAC;iBACX,CAAC,CAAC;aACN;SACJ,CAAC;AACV,IAAA,CAAK,CAAA;AAEL,IAAA,IAAM,YAAY,GAAC,qBACJ,CAAC,IAAI,EAAE,SAAS,EAAE;QAC7B,IAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,IAAQ,CAAC,SAAS,GAAG,SAAS,CAAC;AACnC,IAAA,CAAK,CAAA;AACL,IAAA,uBAAI,IAAI,kBAAC,KAAK,EAAE;QACZ,IAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC;AACrD,IAAA,CAAK,CAAA;AACL,IAAA,uBAAI,KAAK,mBAAC,GAAG,EAAE;QACX,IAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC;AACnD,IAAA,CAAK,CAAA;AACL,IAAA,uBAAI,QAAQ,sBAAC,KAAK,EAAE;QAChB,IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC;AACnD,IAAA,CAAK,CAAA;;;;;;;"}